!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("react-dom"),require("leaflet")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","leaflet"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self).ReactLeaflet={},n.React,n.ReactDOM,n.L)}(this,(function(n,e,t,r){"use strict";function o(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var u=o(e);function c(n,e,t){e.center!==t.center&&n.setLatLng(e.center),null!=e.radius&&e.radius!==t.radius&&n.setRadius(e.radius)}const a=e.createContext(null),l=a.Provider;function i(){const n=e.useContext(a);if(null==n)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function s(n){function t(t,r){const{instance:o,context:c}=n(t).current;return e.useImperativeHandle(r,(()=>o)),null==t.children?null:u.default.createElement(l,{value:c},t.children)}return e.forwardRef(t)}function f(n){function t(t,r){const{instance:o}=n(t).current;return e.useImperativeHandle(r,(()=>o)),null}return e.forwardRef(t)}function p(n){return function(t){const r=i(),o=n(t,r),{instance:u}=o.current,c=e.useRef(t.position),{position:a}=t;return e.useEffect((function(){return u.addTo(r.map),function(){u.remove()}}),[r.map,u]),e.useEffect((function(){null!=a&&a!==c.current&&(u.setPosition(a),c.current=a)}),[u,a]),o}}function d(n,t){const r=e.useRef();e.useEffect((function(){return null!=t&&n.instance.on(t),r.current=t,function(){null!=r.current&&n.instance.off(r.current),r.current=null}}),[n,t])}function y(n){return n.split(" ").filter(Boolean)}function m(n,t){return null==t?function(t,r){return e.useRef(n(t,r))}:function(r,o){const u=e.useRef(n(r,o)),c=e.useRef(r),{instance:a}=u.current;return e.useEffect((function(){c.current!==r&&(t(a,r,c.current),c.current=r)}),[a,r,o]),u}}function v(n,t){e.useEffect((function(){var e;const r=null!=(e=t.layerContainer)?e:t.map;return r.addLayer(n.instance),function(){r.removeLayer(n.instance)}}),[t,n])}function C(n){return function(t){const r=i(),o=n(t,r);return function(n,t){const r=e.useRef(t);e.useEffect((function(){t!==r.current&&null!=n.attributionControl&&(null!=r.current&&n.attributionControl.removeAttribution(r.current),null!=t&&n.attributionControl.addAttribution(t)),r.current=t}),[n,t])}(r.map,t.attribution),d(o.current,t.eventHandlers),v(o.current,r),o}}function h(n){return function(t){const r=i(),o=n(t,r);return d(o.current,t.eventHandlers),v(o.current,r),function(n,t){const r=e.useRef();e.useEffect((function(){if(t.pathOptions!==r.current){var e;const o=null!=(e=t.pathOptions)?e:{};n.instance.setStyle(o),r.current=o}}),[n,t])}(o.current,t),o}}function b(n){return f(p(m((function(e,t){return{instance:n(e),context:t}}))))}function w(n,e){return s(C(m(n,e)))}function x(n,r){return function(n){function r(r,o){const[u,c]=e.useState(!1),{instance:a}=n(r,c).current;e.useImperativeHandle(o,(()=>a)),e.useEffect((function(){u&&a.update()}),[a,u,r.children]);const l=a._contentNode;return l?t.createPortal(r.children,l):null}return e.forwardRef(r)}(function(n,e){return function(t,r){const o=i(),u=n(t,o);return d(u.current,t.eventHandlers),e(u.current,o,t,r),u}}(m(n),r))}function g(n,e){return s(h(m(n,e)))}function L(n,e){return f(C(m(n,e)))}function E(n,e,t){const{opacity:r,zIndex:o}=e;null!=r&&r!==t.opacity&&n.setOpacity(r),null!=o&&o!==t.zIndex&&n.setZIndex(o)}function O(n,e,t){e.bounds instanceof r.LatLngBounds&&e.bounds!==t.bounds&&n.setBounds(e.bounds),null!=e.opacity&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),null!=e.zIndex&&e.zIndex!==t.zIndex&&n.setZIndex(e.zIndex)}function R(){return i().map}const P=b((function(n){return new r.Control.Attribution(n)})),I=g((function({center:n,children:e,...t},o){const u=new r.Circle(n,t);return{instance:u,context:{...o,overlayContainer:u}}}),c),M=g((function({center:n,children:e,...t},o){const u=new r.CircleMarker(n,t);return{instance:u,context:{...o,overlayContainer:u}}}),c),k=g((function({children:n,...e},t){const o=new r.FeatureGroup([],e);return{instance:o,context:{...t,layerContainer:o,overlayContainer:o}}})),N=g((function({data:n,...e},t){const o=new r.GeoJSON(n,e);return{instance:o,context:{...t,overlayContainer:o}}})),S=w((function({bounds:n,url:e,...t},o){const u=new r.ImageOverlay(e,n,t);return{instance:u,context:{...o,overlayContainer:u}}}),(function(n,e,t){O(n,e,t),e.url!==t.url&&n.setUrl(e.url)})),z=w((function({children:n,...e},t){const o=new r.LayerGroup([],e);return{instance:o,context:{...t,layerContainer:o}}})),T=s(p(m((function({children:n,...e},t){const o=new r.Control.Layers(void 0,void 0,e);return{instance:o,context:{...t,layersControl:o}}}),(function(n,e,t){e.collapsed!==t.collapsed&&(!0===e.collapsed?n.collapse():n.expand())}))));function _(n){return function(t){const r=i(),o=e.useRef(t),[c,a]=e.useState(null),{layersControl:s,map:f}=r,p=e.useCallback((e=>{null!=s&&(o.current.checked&&f.addLayer(e),n(s,e,o.current.name),a(e))}),[s,f]),d=e.useCallback((n=>{null==s||s.removeLayer(n),a(null)}),[s]),y=e.useMemo((()=>({...r,layerContainer:{addLayer:p,removeLayer:d}})),[r,p,d]);return e.useEffect((()=>{null!==c&&o.current!==t&&(!0!==t.checked||null!=o.current.checked&&!1!==o.current.checked?!0!==o.current.checked||null!=t.checked&&!1!==t.checked||f.removeLayer(c):f.addLayer(c),o.current=t)})),t.children?u.default.createElement(l,{value:y},t.children):null}}T.BaseLayer=_((function(n,e,t){n.addBaseLayer(e,t)})),T.Overlay=_((function(n,e,t){n.addOverlay(e,t)}));const G=w((function({position:n,...e},t){const o=new r.Marker(n,e);return{instance:o,context:{...t,overlayContainer:o}}}),(function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),null!=e.icon&&e.icon!==t.icon&&n.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),null!=n.dragging&&e.draggable!==t.draggable&&(!0===e.draggable?n.dragging.enable():n.dragging.disable())})),A=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"],B={position:"absolute",top:0,right:0,bottom:0,left:0};function H(n,e){const{[e]:t,...r}=n;return r}const j=g((function({positions:n,...e},t){const o=new r.Polygon(n,e);return{instance:o,context:{...t,overlayContainer:o}}}),(function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)})),V=g((function({positions:n,...e},t){const o=new r.Polyline(n,e);return{instance:o,context:{...t,overlayContainer:o}}}),(function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)})),Z=x((function(n,e){return{instance:new r.Popup(n,e.overlayContainer),context:e}}),(function(n,t,r,o){const{onClose:u,onOpen:c,position:a}=r;e.useEffect((function(){const{instance:e}=n;function r(n){n.popup===e&&(e.update(),o(!0),null==c||c())}function l(n){n.popup===e&&(o(!1),null==u||u())}return t.map.on({popupopen:r,popupclose:l}),null==t.overlayContainer?(null!=a&&e.setLatLng(a),e.openOn(t.map)):t.overlayContainer.bindPopup(e),function(){t.map.off({popupopen:r,popupclose:l}),null==t.overlayContainer?t.map.removeLayer(e):t.overlayContainer.unbindPopup()}}),[n,t,o,u,c,a])})),q=g((function({bounds:n,...e},t){const o=new r.Rectangle(n,e);return{instance:o,context:{...t,overlayContainer:o}}}),(function(n,e,t){e.bounds!==t.bounds&&n.setBounds(e.bounds)})),U=b((function(n){return new r.Control.Scale(n)})),D=C(m((function(n,e){const{attributes:t,bounds:o,...u}=n,c=document.createElementNS("http://www.w3.org/2000/svg","svg");return c.setAttribute("xmlns","http://www.w3.org/2000/svg"),null!=t&&Object.keys(t).forEach((n=>{c.setAttribute(n,t[n])})),{instance:new r.SVGOverlay(c,o,u),container:c,context:e}}),O));function F({children:n,...r},o){const{instance:u,container:c}=D(r).current;return e.useImperativeHandle(o,(()=>u)),null==c||null==n?null:t.createPortal(n,c)}const J=e.forwardRef(F),W=L((function({url:n,...e},t){return{instance:new r.TileLayer(n,e),context:t}}),E),Y=x((function(n,e){return{instance:new r.Tooltip(n,e.overlayContainer),context:e}}),(function(n,t,r,o){const{onClose:u,onOpen:c}=r;e.useEffect((function(){const e=t.overlayContainer;if(null==e)return;const{instance:r}=n,a=n=>{n.tooltip===r&&(r.update(),o(!0),null==c||c())},l=n=>{n.tooltip===r&&(o(!1),null==u||u())};return e.on({tooltipopen:a,tooltipclose:l}),e.bindTooltip(r),function(){e.off({tooltipopen:a,tooltipclose:l}),e.unbindTooltip()}}),[n,t,o,u,c])})),K=w((function({bounds:n,url:e,...t},o){const u=new r.VideoOverlay(e,n,t);var c;!0===t.play&&(null==(c=u.getElement())||c.play());return{instance:u,context:{...o,overlayContainer:u}}}),(function(n,e,t){O(n,e,t),"string"==typeof e.url&&e.url!==t.url&&n.setUrl(e.url);const r=n.getElement();null!=r&&(!0!==e.play||t.play?e.play||!0!==t.play||r.pause():r.play())})),Q=L((function({params:n={},url:e,...t},o){return{instance:new r.TileLayer.WMS(e,{...n,...t}),context:o}}),(function(n,e,t){E(n,e,t),null!=e.params&&e.params!==t.params&&n.setParams(e.params)})),X=b((function(n){return new r.Control.Zoom(n)}));n.AttributionControl=P,n.Circle=I,n.CircleMarker=M,n.FeatureGroup=k,n.GeoJSON=N,n.ImageOverlay=S,n.LayerGroup=z,n.LayersControl=T,n.MapConsumer=function({children:n}){return n(R())},n.MapContainer=function({children:n,className:t,id:o,placeholder:c,style:a,whenCreated:i,...s}){const f=e.useRef(null),p=function(n,t){const[o,u]=e.useState(null);return e.useEffect((()=>{if(null!==n.current&&null===o){const e=new r.Map(n.current,t);null!=t.center&&null!=t.zoom?e.setView(t.center,t.zoom):null!=t.bounds&&e.fitBounds(t.bounds,t.boundsOptions),null!=t.whenReady&&e.whenReady(t.whenReady),u(e)}}),[n,o,t]),o}(f,s),d=e.useRef(!1);e.useEffect((()=>{null!=p&&!1===d.current&&null!=i&&(d.current=!0,i(p))}),[p,i]);const y=e.useMemo((()=>p?{__version:1,map:p}:null),[p]),m=y?u.default.createElement(l,{value:y},n):null!=c?c:null;return u.default.createElement("div",{ref:f,className:t,id:o,style:a},m)},n.Marker=G,n.Pane=function(n){const t=i(),o=e.useRef(null),c=e.useRef(n);function a(e){var t;null!=n.className&&(t=e,y(n.className).forEach((n=>{r.DomUtil.addClass(t,n)}))),null!=n.style&&Object.keys(n.style).forEach((t=>{e.style[t]=n.style[t]}))}function s(){const e=n.name;if(-1!==A.indexOf(e))throw new Error("You must use a unique name for a pane that is not a default Leaflet pane: "+e);if(null!=t.map.getPane(e))throw new Error("A pane with this name already exists: "+e);const r=t.pane?t.map.getPane(t.pane):void 0;o.current=t.map.createPane(e,r),a(o.current)}function f(n){const e=t.map.getPane(n);null==e||null==e.remove||e.remove(),null!=t.map._panes&&(t.map._panes=H(t.map._panes,n),t.map._paneRenderers=H(t.map._paneRenderers,n))}e.useEffect((function(){var e;return null===o.current?s():n!==c.current&&(n.name===c.current.name?(c.current.className&&n.className!==c.current.className&&(e=o.current,y(c.current.className).forEach((n=>{r.DomUtil.removeClass(e,n)}))),a(o.current)):(f(c.current.name),s())),function(){f(n.name)}}));const p=e.useMemo((()=>({...t,pane:n.name})),[t,n.name]);return n.children?u.default.createElement(l,{value:p},u.default.createElement("div",{style:B},n.children)):null},n.Polygon=j,n.Polyline=V,n.Popup=Z,n.Rectangle=q,n.SVGOverlay=J,n.ScaleControl=U,n.TileLayer=W,n.Tooltip=Y,n.VideoOverlay=K,n.WMSTileLayer=Q,n.ZoomControl=X,n.useMap=R,n.useMapEvent=function(n,t){const r=R();return e.useEffect((function(){return r.on(n,t),function(){r.off(n,t)}}),[r,n,t]),r},n.useMapEvents=function(n){const t=R();return e.useEffect((function(){return t.on(n),function(){t.off(n)}}),[t,n]),t},Object.defineProperty(n,"__esModule",{value:!0})}));
